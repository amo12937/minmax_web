(function(){"use strict";!function(a){return angular.module(a,["ng"]).factory(""+a+".PlayerBase",function(){var a;return a=0,function(b){var c;return c=a++,{id:function(){return c},name:function(){return b}}}})}("amo.minmax.Player")}).call(this),function(){"use strict";!function(a){return angular.module(a).factory(""+a+".Man",["$q",""+a+".PlayerBase",function(a,b){return function(c,d){var e,f;return e=null,f=b(c),f.choice=function(a){return e&&d.selectable(a)?(e.resolve(a),e=null):void 0},f.play=function(b){var c;e=a.defer(),c=e.promise,c.then(function(a){return d.select(a),b(d.isFinished())})},f}}])}("amo.minmax.Player")}.call(this),function(){"use strict";!function(a){return angular.module(a).factory(""+a+".Com.Base",["$timeout",""+a+".PlayerBase",function(a,b){return function(c,d,e,f){var g;return null==e&&(e=7),null==f&&(f=0),g=b(c),g.play=function(b){return a(function(){var a;return a=g.getChosen(e),d.select(a),b(d.isFinished())},f)},g}}])}("amo.minmax.Player")}.call(this),function(){"use strict";!function(a){return angular.module(a).factory(""+a+".Com.AlphaBeta",[""+a+".Com.Base",function(a){return function(b,c,d,e){var f,g,h,i,j,k;return null==d&&(d=7),null==e&&(e=0),i=function(){k=[];for(var a=0,b=c["const"].rank()-1;b>=0?b>=a:a>=b;b>=0?a++:a--)k.push(a);return k}.apply(this),f=function(a,b,d){var e,g,h,j,k,l,m;if(0>=a)return 0;if(g=c.current.position(),k=c.current.turn(),c.isFinished())return c.current.result(k)?1/0:-1/0;for(l=0,m=i.length;m>l;l++)if(e=i[l],g[k]=e,c.selectable(g)&&(c.select(g),h=c.current.score(k),j=h-f(a-1,h-d,h-b),c.undo(),j>b&&(b=j),b>=d))return b;return b},g=function(a){var b,d,e,g,h,j,k,l,m,n,o,p;for(j=-1/0,g=[0,0],l=c.current.turn(),m=0,o=i.length;o>m;m++)for(b=i[m],n=0,p=i.length;p>n;n++)d=i[n],e=[b,d],c.select(e),h=c.current.score(l),k=h-f(a-1,-1/0,1/0),c.undo(),k>=j&&(j=k,g=e);return g},h=function(a){var b,d,e,g,h,j,k,l,m;if(0>=a)return[0,0];if(c.isFinished())return[0,0];for(d=c.current.position(),k=c.current.turn(),h=-1/0,e=0,l=0,m=i.length;m>l;l++)b=i[l],d[k]=b,c.selectable(d)&&(c.select(d),g=c.current.score(k),j=g-f(a-1,-1/0,1/0),c.undo(),j>=h&&(h=j,e=b));return d[k]=e,d},j=a(b,c,d,e),j.getChosen=function(){return c.current.isFirst()?g(d):h(d)},j}}])}("amo.minmax.Player")}.call(this),function(){"use strict";!function(a){return angular.module(a).factory(""+a+".Com",[""+a+".Com.Base",function(a){return function(b,c,d,e){var f,g,h,i,j;return null==d&&(d=7),null==e&&(e=0),h=function(){j=[];for(var a=0,b=c["const"].rank()-1;b>=0?b>=a:a>=b;b>=0?a++:a--)j.push(a);return j}.apply(this),f=function(a){var b,d,e,g,i,j,k,l,m,n,o;if(0>=a)return[0,[0,0]];if(d=c.current.position(),k=c.current.turn(),c.isFinished())return c.current.result(k)?[1/0,[0,0]]:[-1/0,[0,0]];for(j=-1/0,e=0,m=0,n=h.length;n>m;m++)b=h[m],d[k]=b,c.selectable(d)&&(c.select(d),g=c.current.score(k),o=f(a-1),i=o[0],l=o[1],g-=i,c.undo(),g>j&&(j=g,e=b));return d[k]=e,[j,d]},g=function(a){var b,d,e,g,i,j,k,l,m,n,o,p,q,r;for(l=c.current.turn(),k=-1/0,g=0,n=0,p=h.length;p>n;n++)for(b=h[n],o=0,q=h.length;q>o;o++)d=h[o],e=[b,d],c.select(e),i=c.current.score(l),r=f(a-1),j=r[0],m=r[1],i-=j,c.undo(),i>k&&(k=i,g=e);return[k,g]},i=a(b,c,d,e),i.getChosen=function(a){return c.current.isFirst()?g(a)[1]:f(a)[1]},i}}])}("amo.minmax.Player")}.call(this),function(){"use strict";!function(a){return angular.module(a).factory(""+a+".Com.DoubleChecker",[""+a+".Com.Base",""+a+".Com.AlphaBeta",""+a+".Com",function(a,b,c){return function(d,e,f,g){var h,i,j;return null==f&&(f=7),null==g&&(g=0),h=b(d,e,f,g),i=c(d,e,f,g),j=a(d,e,f,g),j.getChosen=function(a){var b,c;return b=h.getChosen(a),c=i.getChosen(a),(b[0]!==c[0]||b[1]!==c[1])&&console.log("abPos = ("+b+"), mmPos = ("+c+")"),b},j}}])}("amo.minmax.Player")}.call(this),function(){"use strict";!function(a){return angular.module(a,["ng","amo.module.translator"]).value(""+a+".config",{resourceDir:"res/minmax/translator/",resourceExt:".json",loader:{trans:{rules:[{key:"en",displayName:"English"},{key:"jp",displayName:"日本語"}],defaultRule:"jp"}}})}("amo.minmax.module.translator")}.call(this),function(){"use strict";!function(a){return angular.module(a).factory(""+a+".api.GetRule",["$http",""+a+".config",function(a,b){return function(){var c;return c={getPath:function(a,c){return null==c&&(c=b.resourceExt),""+b.resourceDir+a+c},request:function(b,d){return a.get(c.getPath(b,d))}}}}])}("amo.minmax.module.translator")}.call(this),function(){"use strict";!function(a){var b,c;return b="amo.module.translator",c="trans",angular.module(a).config([""+b+".translatorCollectionProvider",function(a){return a.registerTranslator(c)}]).provider(""+a+".transResolver",function(){return{$get:function(){return{}},getResolver:function(){return["$location",""+b+".translatorCollection",""+a+".api.GetRule",function(a,b,d){var e,f,g;return f=a.search(),e=f.lang||"ja",g=b.getTranslator(c),g.setRule({}),d().request(""+e+"/"+c).then(function(a){g.setRule(a.data)})}]}}})}("amo.minmax.module.translator")}.call(this),function(){"use strict";!function(a){var b,c,d,e;return e=0,b=1,c=function(a){return 1-a},d="**",angular.module(a,["ng"]).factory(""+a+".RandomScoreCreator",function(){return function(a,b){return function(){return Math.floor(Math.random()*(b-a+1))+a}}}).factory(""+a+".Board",function(){return function(a,c,d){var f,g,h,i,j,k;return i=function(){k=[];for(var b=0,c=a-1;c>=0?c>=b:b>=c;c>=0?b++:b--)k.push(b);return k}.apply(this),f=function(){var a,b,d;for(d=[],a=0,b=i.length;b>a;a++)g=i[a],d.push(function(){var a,b,d;for(d=[],a=0,b=i.length;b>a;a++)h=i[a],d.push([!1,c(g,h)]);return d}());return d}(),j={rank:function(){return a},isInside:function(c){var d,f;return 0<=(d=c[e])&&a>d&&0<=(f=c[b])&&a>f},get:function(a){return j.isInside(a)?f[a[e]][a[b]][1]:d},used:function(a){return j.isInside(a)?f[a[e]][a[b]][0]:!1},use:function(a){return j.isInside(a)?f[a[e]][a[b]][0]=!0:void 0},unuse:function(a){return j.isInside(a)?f[a[e]][a[b]][0]=!1:void 0}}}}).factory(""+a+".BoardMaster",function(){var a;return a=function(a){var d,f,g,h,i;return i=b,f=[0,0],d=[],h=[],g={"const":{rank:function(){return a.rank()},TURN:{BLACK:b,WHITE:e}},current:{turn:function(a){return void 0===a?i:i===a},score:function(a){return void 0===a?[f[e],f[b]]:f[a]},position:function(a){return void 0===a?[d[e],d[b]]:a[e]===d[e]&&a[b]===d[e]},isFirst:function(){return void 0===d[e]&&void 0===d[b]},result:function(a){return void 0===a?f[b]-f[e]:f[a]>f[c(a)]}},get:function(b){return a.get(b)},used:function(b){return a.used(b)},selectable:function(b){var e;return a.isInside(b)?(e=c(i),void 0===d[e]?!0:b[e]!==d[e]?!1:!a.used(b)):!1},select:function(j){var k,l,m;return g.selectable(j)?(k=d,d=[j[e],j[b]],l=a.get(d),f[i]+=l,a.use(d),m=i,i=c(m),h.push(function(){return i=m,a.unuse(d),f[i]-=l,d=k}),!0):!1},undo:function(){var a;return"function"==typeof(a=h.pop())?a():void 0},isFinished:function(){var b,c,e,f;if(void 0===d[i])return!1;for(c=g.current.position(),b=e=0,f=a.rank()-1;f>=0?f>=e:e>=f;b=f>=0?++e:--e)if(c[i]=b,g.selectable(c))return!1;return!0}}}})}("amo.minmax.BoardMaster")}.call(this),function(){"use strict";var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};!function(a){return angular.module(a,["ng"]).factory(""+a+".GameMasterFsm",function(){return function(a){var c,d,e,f,g,h,i,j,k,l;return i=null,h=!1,l=function(a){return h?void 0:(h=!0,null!=i&&"function"==typeof i.Exit&&i.Exit(),i=a,null!=a&&"function"==typeof a.Entry&&a.Entry(),h=!1)},j=function(){},d=function(){function a(){}return a.prototype.Entry=j,a.prototype.Exit=j,a.prototype.start=j,a.prototype.finish=j,a.prototype.endGame=j,a.prototype.stop=function(){return l(g)},a.prototype.started=function(){return!1},a.prototype.done=function(){return!1},a.prototype.stopped=function(){return!1},a}(),e=new(function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.start=function(){return l(f)},c}(d)),f=new(function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return b(e,d),e.prototype.Entry=function(){return a.startPlaying()},e.prototype.Exit=function(){return a.finishPlaying()},e.prototype.finish=function(){return l(f)},e.prototype.endGame=function(){return l(c)},e.prototype.started=function(){return!0},e}(d)),c=new(function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.Entry=function(){return a.endGame()},d.prototype.stop=j,d.prototype.done=function(){return!0},d}(d)),g=new(function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.Entry=function(){return a.stop()},d.prototype.stop=j,d.prototype.stopped=function(){return!0},d}(d)),i=e,k=function(){return i},k.changing=function(){return h},k}}).factory(""+a+".GameMaster",["$timeout",""+a+".GameMasterFsm",function(a,b){return function(c,d){var e,f,g;return e=d(),f=b({startPlaying:function(){return a(function(){return console.log("turn = "+e.id()),e.play(function(a){return a?f().endGame():f().finish()})})},finishPlaying:function(){return e=d()},endGame:function(){return"function"==typeof c.endGame?c.endGame():void 0},stop:function(){return"function"==typeof c.stop?c.stop():void 0}}),g={start:function(){return f().start()},current:function(){return e},stop:function(){return"function"==typeof f?f().stop():void 0},started:function(){return"function"==typeof f?f().started():void 0},done:function(){return"function"==typeof f?f().done():void 0},stopped:function(){return"function"==typeof f?f().stopped():void 0}}}}])}("amo.minmax.GameMaster")}.call(this),function(){"use strict";!function(a){return angular.module(""+a+".controllers",["ng","ngRoute",""+a+".BoardMaster",""+a+".Player",""+a+".GameMaster",""+a+".module.translator"]).controller(""+a+".controllers.minmax",["$location","$route","$scope",""+a+".BoardMaster.RandomScoreCreator",""+a+".BoardMaster.Board",""+a+".BoardMaster.BoardMaster",""+a+".Player.Man",""+a+".Player.Com.AlphaBeta",""+a+".Player.Com",""+a+".Player.Com.DoubleChecker",""+a+".GameMaster.GameMaster","amo.module.translator.translatorCollection",function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return x={MAN:"MAN",COM:"COM",COMAB:"COMAB",COMDC:"COMDC"},w={MAN:g,COM:i,COMAB:h,COMDC:j},z=function(a,b){return a?Number(a):b},o=function(a,b,d,e){return w[a](b,c.boardMaster,Math.max(d,1),Math.max(e,0))},A=l.getTranslator("trans"),t=a.search(),s={min:z(t.min,-10),max:z(t.max,10),rank:z(t.rank,7),p1:t.p1||x.MAN,p1_name:t.p1_name||A("You"),p1_level:z(t.p1_level,5),p1_delay:z(t.p1_delay,100),p2:t.p2||x.COMAB,p2_name:t.p2_name||A("Com"),p2_level:z(t.p2_level,5),p2_delay:z(t.p2_delay,100)},c.levels=[1,2,3,4,5,6,7,8,9],c.p2_level=s.p2_level,p=d(s.min,s.max),m=e(s.rank,p,"outside"),c.boardMaster=n=f(m),c.rankList=function(){B=[];for(var a=0,b=s.rank-1;b>=0?b>=a:a>=b;b>=0?a++:a--)B.push(a);return B}.apply(this),y={},y[n["const"].TURN.BLACK]=u=o(s.p1,s.p1_name,s.p1_level,s.p1_delay),y[n["const"].TURN.WHITE]=v=o(s.p2,s.p2_name,s.p2_level,s.p2_delay),r={endGame:function(){var a;return console.log("end"),a=n.current.result(),a>0?c.winner={name:u.name()}:0>a?c.winner={name:v.name()}:void 0},stop:function(){return console.log("stop")}},q=null,q=k(r,function(){return y[n.current.turn()]}),q.start(),c.play=function(){return a.search("p2_level",c.p2_level),b.reload()},c.clickCell=function(a,b){var c;return"function"==typeof(c=q.current()).choice?c.choice([a,b]):void 0}}])}("amo.minmax")}.call(this),function(){"use strict";!function(a){return angular.module(a).config(["$routeProvider","amo.minmax.module.translator.transResolverProvider",function(b,c){return b.when("/",{templateUrl:"templates/minmax.html",controller:""+a+".minmax",resolve:{trans:c.getResolver()}})}])}("amo.minmax.controllers")}.call(this),function(){"use strict";!function(a){return a.module("ngLoadScript",[]).directive("script",function(){return{restrict:"E",scope:!1,link:function(a,b,c){var d,e;if("text/javascript-lazy"===c.type)return d=b.text(),(e=new Function(d))()}}})}(angular)}.call(this),function(){"use strict";!function(a){return angular.module(""+a+".Main",["ng","ngLoadScript",""+a+".BoardMaster",""+a+".Player",""+a+".controllers"])}("amo.minmax")}.call(this),function(){"use strict";angular.element(window.document).ready(function(){var a,b;try{return angular.bootstrap(window.document,["amo.minmax.Main"])}catch(c){return a=c,b=a.message.indexOf("?"),console.log(decodeURIComponent(a.message.slice(b+1))),console.log(a)}})}.call(this);