(function(){"use strict";!function(a){return angular.module(a,["ng"]).factory(""+a+".PlayerBase",function(){var a;return a=0,function(b){var c;return c=a++,{id:function(){return c},name:function(){return b}}}})}("amo.minmax.Player")}).call(this),function(){"use strict";!function(a){return angular.module(a).factory(""+a+".Man",["$q",""+a+".PlayerBase",function(a,b){return function(c,d){var e,f;return e=null,f=b(c),f.choice=function(a){return e&&d.selectable(a)?(e.resolve(a),e=null):void 0},f.play=function(b){var c;e=a.defer(),c=e.promise,c.then(function(a){return d.select(a),b(d.isFinished())})},f}}])}("amo.minmax.Player")}.call(this),function(){"use strict";!function(a){return angular.module(a).factory(""+a+".Com",["$timeout",""+a+".PlayerBase",function(a,b){return function(c,d,e,f){var g,h,i,j,k;return null==e&&(e=7),null==f&&(f=0),i=function(){k=[];for(var a=0,b=d["const"].rank()-1;b>=0?b>=a:a>=b;b>=0?a++:a--)k.push(a);return k}.apply(this),g=function(a){var b,c,e,f,h,j,k,l,m,n,o;if(0>=a)return[0,[0,0]];if(d.isFinished())return[0,[0,0]];for(c=d.current.position(),k=d.current.turn(),j=-1/0,e=0,m=0,n=i.length;n>m;m++)b=i[m],c[k]=b,d.selectable(c)&&(d.select(c),f=d.current.score(k),o=g(a-1),h=o[0],l=o[1],f-=h,d.undo(),f>j&&(j=f,e=b));return c[k]=e,[j,c]},h=function(a){var b,c,e,f,h,j,k,l,m,n,o,p,q,r;for(l=d.current.turn(),k=-1/0,f=0,n=0,p=i.length;p>n;n++)for(b=i[n],o=0,q=i.length;q>o;o++)c=i[o],e=[b,c],d.select(e),h=d.current.score(l),r=g(a-1),j=r[0],m=r[1],h-=j,d.undo(),h>k&&(k=h,f=e);return[k,f]},j=b(c),j.play=function(b){return a(function(){var a,c,f,i;return d.current.isFirst()?(f=h(e),c=f[0],a=f[1]):(i=g(e),c=i[0],a=i[1]),d.select(a),b(d.isFinished())},f)},j}}])}("amo.minmax.Player")}.call(this),function(){"use strict";!function(a){return angular.module(a).factory(""+a+".Com.AlphaBeta",["$timeout",""+a+".PlayerBase",function(a,b){return function(c,d,e,f){var g,h,i,j,k,l;return null==e&&(e=7),null==f&&(f=0),j=function(){l=[];for(var a=0,b=d["const"].rank()-1;b>=0?b>=a:a>=b;b>=0?a++:a--)l.push(a);return l}.apply(this),g=function(a,b,c){var e,f,h,i,k,l,m;if(0>=a)return 0;if(f=d.current.position(),k=d.current.turn(),d.isFinished())return d.current.result(k)?1/0:-1/0;for(l=0,m=j.length;m>l;l++)if(e=j[l],f[k]=e,d.selectable(f)&&(d.select(f),h=d.current.score(k),i=h-g(a-1,h-c,h-b),d.undo(),i>b&&(b=i),b>=c))return b;return b},h=function(a){var b,c,e,f,h,i,k,l,m,n,o,p;for(i=-1/0,f=[0,0],l=d.current.turn(),m=0,o=j.length;o>m;m++)for(b=j[m],n=0,p=j.length;p>n;n++)c=j[n],e=[b,c],d.select(e),h=d.current.score(l),k=h-g(a-1,-1/0,1/0),d.undo(),k>=i&&(i=k,f=e);return f},i=function(a){var b,c,e,f,h,i,k,l,m;if(0>=a)return[0,0];if(d.isFinished())return[0,0];for(c=d.current.position(),k=d.current.turn(),h=-1/0,e=0,l=0,m=j.length;m>l;l++)b=j[l],c[k]=b,d.selectable(c)&&(d.select(c),f=d.current.score(k),i=f-g(a-1,-1/0,1/0),d.undo(),i>=h&&(h=i,e=b));return c[k]=e,c},k=b(c),k.play=function(b){return a(function(){var a;return a=d.current.isFirst()?h(e):i(e),d.select(a),b(d.isFinished())},f)},k}}])}("amo.minmax.Player")}.call(this),function(){"use strict";var a=[].slice;!function(b){var c;return c=function(b,c,d){var e;return null==d&&(d={}),e=function(c,e){var f,g,h,i,j,k,l,m,n,o,p;null==e&&(e={}),k=d[c]||c;for(j in e){for(l=e[j],o=l instanceof Array?l:[l],l=o[0],i=2<=o.length?a.call(o,1):[],m=0,n=i.length;n>m;m++)h=i[m],p=h instanceof Array?h:[h],h=p[0],f=2<=p.length?a.call(p,1):[],g=b(h),l=g.apply(g,[l].concat(a.call(f)));k=k.split("%"+j+"%").join(l)}return k},e.setRules=function(a){return null==a&&(a={}),d=a},e.getName=function(){return c},e},angular.module(b,["ng"]).provider(""+b+".translatorCollection",["$filterProvider",function(a){var d;return d={},{registerTranslator:function(c){return a.register(c,[""+b+".translatorCollection",function(a){var b;return b=a.getTranslator(c),function(){return b.apply(void 0,arguments)}}])},$get:["$filter",function(a){return{getTranslator:function(b){return null!=d[b]?d[b]:d[b]=c(a,b)}}}]}}])}("amo.module.Translator")}.call(this),function(){"use strict";!function(a){var b;return b="amo.module.Translator",angular.module(a,["ng",b]).value(""+a+".config",{resourceDir:"res/minmax/translator/",resourceExt:".json",loader:{trans:{rules:[{key:"en",displayName:"English"},{key:"jp",displayName:"日本語"}],defaultRule:"jp"}}})}("amo.minmax.module.Translator")}.call(this),function(){"use strict";!function(a){return angular.module(a).factory(""+a+".api.GetRule",["$http",""+a+".config",function(a,b){return function(){var c;return c={getPath:function(a,c){return null==c&&(c=b.resourceExt),""+b.resourceDir+a+c},request:function(b,d){return a.get(c.getPath(b,d))}}}}])}("amo.minmax.module.Translator")}.call(this),function(){"use strict";!function(a){var b,c;return b="amo.module.Translator",c="trans",angular.module(a).config([""+b+".translatorCollectionProvider",function(a){return a.registerTranslator(c)}]).provider(""+a+".transResolver",function(){return{$get:function(){return{}},getResolver:function(){return["$location",""+b+".translatorCollection",""+a+".api.GetRule",function(a,b,d){var e,f,g;return f=a.search(),e=f.lang||"jp",g=b.getTranslator(c),g.setRules({}),d().request(""+e+"/"+c).then(function(a){g.setRules(a.data)})}]}}})}("amo.minmax.module.Translator")}.call(this),function(){"use strict";!function(a){var b,c,d,e;return e=0,b=1,c=function(a){return 1-a},d="**",angular.module(a,["ng"]).factory(""+a+".RandomScoreCreator",function(){return function(a,b){return function(){return Math.floor(Math.random()*(b-a+1))+a}}}).factory(""+a+".Board",function(){return function(a,c,d){var f,g,h,i,j,k;return i=function(){k=[];for(var b=0,c=a-1;c>=0?c>=b:b>=c;c>=0?b++:b--)k.push(b);return k}.apply(this),f=function(){var a,b,d;for(d=[],a=0,b=i.length;b>a;a++)g=i[a],d.push(function(){var a,b,d;for(d=[],a=0,b=i.length;b>a;a++)h=i[a],d.push([!1,c(g,h)]);return d}());return d}(),j={rank:function(){return a},isInside:function(c){var d,f;return 0<=(d=c[e])&&a>d&&0<=(f=c[b])&&a>f},get:function(a){return j.isInside(a)?f[a[e]][a[b]][1]:d},used:function(a){return j.isInside(a)?f[a[e]][a[b]][0]:!1},use:function(a){return j.isInside(a)?f[a[e]][a[b]][0]=!0:void 0},unuse:function(a){return j.isInside(a)?f[a[e]][a[b]][0]=!1:void 0}}}}).factory(""+a+".BoardMaster",function(){var a;return a=function(a){var d,f,g,h,i;return i=b,f=[0,0],d=[],h=[],g={"const":{rank:function(){return a.rank()},TURN:{BLACK:b,WHITE:e}},current:{turn:function(a){return void 0===a?i:i===a},score:function(a){return void 0===a?[f[e],f[b]]:f[a]},position:function(a){return void 0===a?[d[e],d[b]]:a[e]===d[e]&&a[b]===d[e]},isFirst:function(){return void 0===d[e]&&void 0===d[b]},result:function(a){return void 0===a?f[b]-f[e]:f[a]>f[c(a)]}},get:function(b){return a.get(b)},used:function(b){return a.used(b)},selectable:function(b){var e;return a.isInside(b)?(e=c(i),void 0===d[e]?!0:b[e]!==d[e]?!1:!a.used(b)):!1},select:function(j){var k,l,m;return g.selectable(j)?(k=d,d=[j[e],j[b]],l=a.get(d),f[i]+=l,a.use(d),m=i,i=c(m),h.push(function(){return i=m,a.unuse(d),f[i]-=l,d=k}),!0):!1},undo:function(){var a;return"function"==typeof(a=h.pop())?a():void 0},isFinished:function(){var b,c,e,f;if(void 0===d[i])return!1;for(c=g.current.position(),b=e=0,f=a.rank()-1;f>=0?f>=e:e>=f;b=f>=0?++e:--e)if(c[i]=b,g.selectable(c))return!1;return!0}}}})}("amo.minmax.BoardMaster")}.call(this),function(){"use strict";var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};!function(a){return angular.module(a,["ng"]).factory(""+a+".GameMasterFsm",function(){return function(a){var c,d,e,f,g,h,i,j,k,l;return i=null,h=!1,l=function(a){return h?void 0:(h=!0,null!=i&&"function"==typeof i.Exit&&i.Exit(),i=a,null!=a&&"function"==typeof a.Entry&&a.Entry(),h=!1)},j=function(){},d=function(){function a(){}return a.prototype.Entry=j,a.prototype.Exit=j,a.prototype.start=j,a.prototype.finish=j,a.prototype.endGame=j,a.prototype.stop=function(){return l(g)},a.prototype.started=function(){return!1},a.prototype.done=function(){return!1},a.prototype.stopped=function(){return!1},a}(),e=new(function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.start=function(){return l(f)},c}(d)),f=new(function(d){function e(){return e.__super__.constructor.apply(this,arguments)}return b(e,d),e.prototype.Entry=function(){return a.startPlaying()},e.prototype.Exit=function(){return a.finishPlaying()},e.prototype.finish=function(){return l(f)},e.prototype.endGame=function(){return l(c)},e.prototype.started=function(){return!0},e}(d)),c=new(function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.Entry=function(){return a.endGame()},d.prototype.stop=j,d.prototype.done=function(){return!0},d}(d)),g=new(function(c){function d(){return d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.Entry=function(){return a.stop()},d.prototype.stop=j,d.prototype.stopped=function(){return!0},d}(d)),i=e,k=function(){return i},k.changing=function(){return h},k}}).factory(""+a+".GameMaster",["$timeout",""+a+".GameMasterFsm",function(a,b){return function(c,d){var e,f,g;return e=d(),f=b({startPlaying:function(){return a(function(){return console.log("turn = "+e.id()),e.play(function(a){return a?f().endGame():f().finish()})})},finishPlaying:function(){return e=d()},endGame:function(){return"function"==typeof c.endGame?c.endGame():void 0},stop:function(){return"function"==typeof c.stop?c.stop():void 0}}),g={start:function(){return f().start()},current:function(){return e},stop:function(){return"function"==typeof f?f().stop():void 0},started:function(){return"function"==typeof f?f().started():void 0},done:function(){return"function"==typeof f?f().done():void 0},stopped:function(){return"function"==typeof f?f().stopped():void 0}}}}])}("amo.minmax.GameMaster")}.call(this),function(){"use strict";!function(a){return angular.module(""+a+".controllers",["ng","ngRoute",""+a+".BoardMaster",""+a+".Player",""+a+".GameMaster",""+a+".module.Translator"]).controller(""+a+".controllers.minmax",["$location","$route","$scope",""+a+".BoardMaster.RandomScoreCreator",""+a+".BoardMaster.Board",""+a+".BoardMaster.BoardMaster",""+a+".Player.Man",""+a+".Player.Com",""+a+".Player.Com.AlphaBeta",""+a+".GameMaster.GameMaster","amo.module.Translator.translatorCollection",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;return w={MAN:"MAN",COM:"COM",COMAB:"COMAB"},v={MAN:g,COM:h,COMAB:i},y=function(a,b){return a?Number(a):b},n=function(a,b,d,e){return v[a](b,c.boardMaster,Math.max(d,1),Math.max(e,0))},z=k.getTranslator("trans"),s=a.search(),r={min:y(s.min,-10),max:y(s.max,10),rank:y(s.rank,7),p1:s.p1||w.MAN,p1_name:s.p1_name||z("You"),p1_level:y(s.p1_level,5),p1_delay:y(s.p1_delay,100),p2:s.p2||w.COMAB,p2_name:s.p2_name||z("Com"),p2_level:y(s.p2_level,5),p2_delay:y(s.p2_delay,100)},c.levels=[1,2,3,4,5,6,7,8,9],c.p2_level=r.p2_level,o=d(r.min,r.max),l=e(r.rank,o,"outside"),c.boardMaster=m=f(l),c.rankList=function(){A=[];for(var a=0,b=r.rank-1;b>=0?b>=a:a>=b;b>=0?a++:a--)A.push(a);return A}.apply(this),x={},x[m["const"].TURN.BLACK]=t=n(r.p1,r.p1_name,r.p1_level,r.p1_delay),x[m["const"].TURN.WHITE]=u=n(r.p2,r.p2_name,r.p2_level,r.p2_delay),q={endGame:function(){var a;return console.log("end"),a=m.current.result(),a>0?c.winner={name:t.name()}:0>a?c.winner={name:u.name()}:void 0},stop:function(){return console.log("stop")}},p=null,p=j(q,function(){return x[m.current.turn()]}),p.start(),c.play=function(){return a.search("p2_level",c.p2_level),b.reload()},c.clickCell=function(a,b){var c;return"function"==typeof(c=p.current()).choice?c.choice([a,b]):void 0}}])}("amo.minmax")}.call(this),function(){"use strict";!function(a){return angular.module(a).config(["$routeProvider","amo.minmax.module.Translator.transResolverProvider",function(b,c){return b.when("/",{templateUrl:"templates/minmax.html",controller:""+a+".minmax",resolve:{trans:c.getResolver()}})}])}("amo.minmax.controllers")}.call(this),function(){"use strict";!function(a){return angular.module(""+a+".Main",["ng",""+a+".BoardMaster",""+a+".Player",""+a+".controllers"])}("amo.minmax")}.call(this),function(){"use strict";angular.element(window.document).ready(function(){var a,b;try{return angular.bootstrap(window.document,["amo.minmax.Main"])}catch(c){return a=c,b=a.message.indexOf("?"),console.log(decodeURIComponent(a.message.slice(b+1))),console.log(a)}})}.call(this);