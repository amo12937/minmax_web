/*! angular.amo.module.game.game 0.0.0 | Copyright (c) 2015 Author: amo | License: MIT */(function(){"use strict";var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};!function(a){return angular.module(a,["ng","amo.module.state_machine"]).factory(""+a+".GameFsm",["amo.module.state_machine.StateSetter",function(a){return function(c){var d,e,f,g,h,i;return i=a(),e=function(){function a(){}return a.prototype.Entry=i.defaultAction,a.prototype.Exit=i.defaultAction,a.prototype.start=i.defaultAction,a.prototype.pause=i.defaultAction,a.prototype.resume=i.defaultAction,a.prototype.finish=i.defaultAction,a.prototype.stop=function(){return i(h)},a.prototype.isInit=function(){return!1},a.prototype.isPlaying=function(){return!1},a.prototype.isPausing=function(){return!1},a.prototype.isDone=function(){return!1},a.prototype.isStopped=function(){return!1},a}(),f=new(function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.start=function(){return i(g)},c.prototype.isInit=function(){return!0},c}(e)),g=function(){var a;return a=!1,new(function(e){function f(){return f.__super__.constructor.apply(this,arguments)}return b(f,e),f.prototype.Entry=function(){return c.startToPlay()},f.prototype.Exit=function(){return c.finishPlaying()},f.prototype.pause=function(){return!a&&c.canPause()?(a=!0,c.pause()):void 0},f.prototype.resume=function(){return a?(c.resume(),a=!1):void 0},f.prototype.finish=function(b){return a?void 0:i(b?d:g)},f.prototype.isPlaying=function(){return!0},f.prototype.isPausing=function(){return a},f}(e))}(),d=new(function(a){function d(){return d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.Entry=function(){return c.entryDone()},d.prototype.stop=i.defaultAction,d.prototype.isDone=function(){return!0},d}(e)),h=new(function(a){function d(){return d.__super__.constructor.apply(this,arguments)}return b(d,a),d.prototype.Entry=function(){return c.entryStopped()},d.prototype.stop=i.defaultAction,d.prototype.isStopped=function(){return!0},d}(e)),i.getFsm(f)}}]).factory(""+a+".Game",["$timeout",""+a+".GameFsm",function(a,b){return function(c){var d,e,f;return d=null,e=b({startToPlay:function(){return"function"==typeof c.notifyStartingToPlay&&c.notifyStartingToPlay(),d=c.getNextPlayer(),a(function(){return d.play(function(a){return e().finish(a)})})},finishPlaying:function(){return d=null,"function"==typeof c.notifyFinishedPlaying?c.notifyFinishedPlaying():void 0},canPause:function(){return null!=d&&"function"==typeof d.canPause?d.canPause():void 0},pause:function(){return d.pause(),"function"==typeof c.notifyPausing?c.notifyPausing():void 0},resume:function(){return"function"==typeof c.notifyResuming&&c.notifyResuming(),d.resume()},entryDone:function(){return"function"==typeof c.end?c.end():void 0},entryStopped:function(){return"function"==typeof c.stop?c.stop():void 0}}),f={start:function(){return e().start()},pause:function(){return e().pause()},resume:function(){return e().resume()},stop:function(){return e().stop()}}}}])}("amo.module.game.game")}).call(this);